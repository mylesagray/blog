<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>esxi | Blah, Cloud</title><meta name=keywords content>
<meta name=description content="Adventures in architectures">
<meta name=author content="Myles Gray">
<link rel=canonical href=https://blah.cloud/tags/esxi/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.b1da2895238dfeedf27f032004268905e3f3ba403dec0ceb07be46cce8ac5b96.css integrity="sha256-sdoolSON/u3yfwMgBCaJBePzukA97AzrB75GzOisW5Y=" rel="preload stylesheet" as=style>
<link rel=icon href=https://blah.cloud/images/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://blah.cloud/images/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://blah.cloud/images/favicon-32x32.png>
<link rel=apple-touch-icon href=https://blah.cloud/images/apple-touch-icon.png>
<link rel=mask-icon href=https://blah.cloud/images/logo.png>
<meta name=theme-color media="(prefers-color-scheme: dark)" content="rgba(88, 89, 91, 1)">
<meta name=theme-color content="rgba(240, 202, 102, 1)">
<meta name=msapplication-TileColor content="rgba(240, 202, 102, 1)">
<meta name=generator content="Hugo 0.93.2">
<link rel=alternate type=application/rss+xml href=https://blah.cloud/tags/esxi/index.xml>
<meta property="og:title" content="esxi">
<meta property="og:description" content="Adventures in architectures">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blah.cloud/tags/esxi/"><meta property="og:image" content="https://blah.cloud/images/og-card.jpg"><meta property="og:site_name" content="Blah, Cloud">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blah.cloud/images/og-card.jpg">
<meta name=twitter:title content="esxi">
<meta name=twitter:description content="Adventures in architectures">
<meta name=twitter:site content="@mylesagray">
<meta name=twitter:creator content="@mylesagray">
<script defer data-domain=blah.cloud data-api=/backend/api/event src=/backend/js/script.outbound-links.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script>
</head><body class=list id=top>
<script>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.body.classList.add("dark"),document.body.classList.remove("light")):(document.body.classList.remove("dark"),document.body.classList.add("light"));const darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)");darkModeMediaQuery.addListener(e=>{const t=e.matches;t?(document.body.classList.add("dark"),document.body.classList.remove("light")):(document.body.classList.remove("dark"),document.body.classList.add("light"))})</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(240, 202, 102, 1);--secondary:rgba(216, 214, 197, 1);--tertiary:rgb(75, 75, 75);--content:rgba(206, 205, 188, 1);--hljs-bg:#282a36;--code-bg:#282a36;--border:rgba(240, 202, 102, 1);--highlight:rgba(88, 89, 91, 1)}.list{background:var(--theme)}}</style></noscript><header class=header>
<nav class=nav>
<div class=logo>
<a href=https://blah.cloud/ accesskey=h title="Blah, Cloud. (Alt + H)">
<picture>
<source media="(min-width: 768px)" srcset=/images/logo-title.avif type=image/avif alt=logo width=245 height=34>
<source media="(min-width: 768px)" srcset=/images/logo-title.webp type=image/webp alt=logo width=245 height=34>
<source media="(min-width: 768px)" srcset=/images/logo-title.png type=image/png alt=logo width=245 height=34>
<source srcset=/images/logo.avif type=image/avif alt=logo width=65 height=65>
<source srcset=/images/logo.webp type=image/webp alt=logo width=65 height=65>
<img class=logo src=/images/logo-title.png alt=logo aria-label=logo width=245 height=34>
</picture></a>
</div><span class=logo-switches>
</span>
<span class=hamburger>
<button id=hamburger-toggle accesskey=m title="(Alt + M)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28"><path d="M24 21v2c0 .547-.453 1-1 1H1c-.547.0-1-.453-1-1v-2c0-.547.453-1 1-1h22c.547.0 1 .453 1 1zm0-8v2c0 .547-.453 1-1 1H1c-.547.0-1-.453-1-1v-2c0-.547.453-1 1-1h22c.547.0 1 .453 1 1zm0-8v2c0 .547-.453 1-1 1H1c-.547.0-1-.453-1-1V5c0-.547.453-1 1-1h22c.547.0 1 .453 1 1z"/></svg>
</button>
</span>
<ul id=menu>
<li>
<a href=https://blah.cloud/about/ title=about>
<span>about</span>
</a>
</li><li>
<a href=https://blah.cloud/blog/ title=blog>
<span>blog</span>
</a>
</li><li>
<a href=https://blah.cloud/now/ title=now>
<span>now</span>
</a>
</li><li>
<a href=https://blah.cloud/works/ title=works>
<span>works</span>
</a>
</li><li>
<a href=https://blah.cloud/search/ title=" (Alt + /)" accesskey=/>
<span><svg style="height:1em" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="fill-current w-5" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span>
</a>
</li></ul></nav></header><div class=container>
<main class=main>
<header class=page-header>
<h1>esxi</h1></header><article class="post-entry tag-entry">
<header class=entry-header>
<h2>Using the vSphere Cloud Provider for K8s to dynamically deploy volumes
</h2></header><section class=entry-content>
<p>Using the VCP As of the last part in the series we have a fully up and running k8s cluster with the vSphere Cloud Provider installed! Let’s make sure it works and is provisioning storage for us by deploying a StorageClass and a test app.
Prerequisites Tools I am using macOS, so will be using the brew package manager to install and manage my tools, if you are using Linux or Windows, use the appropriate install guide for each tool, according to your OS....</p></section><footer class=entry-footer><span title="2019-02-08 22:38:35 +0000 UTC">February 8, 2019</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to Using the vSphere Cloud Provider for K8s to dynamically deploy volumes" href=https://blah.cloud/kubernetes/using-the-vsphere-cloud-provider-for-k8s-to-dynamically-deploy-volumes/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>Migrating vSAN vmkernel ports to a new subnet
</h2></header><section class=entry-content>
<p>After deploying a vSAN cluster, the need sometimes arises to make changes to its network configuration, such as migrating the vmkernel network of the cluster to a new subnet. This requirement may appear for example when changing the network in which the vSAN cluster is running, or even, in a more complex scenario such as when a standalone vSAN needs to be converted to a stretched cluster.
In these sorts of situations, complications may be encountered if the subnet in use for the vSAN vmkernel ports cannot be routed to the network as a whole, as it is in use elsewhere in the organization, and is currently isolated in an L2 segment....</p></section><footer class=entry-footer><span title="2017-11-03 14:01:47 +0000 UTC">November 3, 2017</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to Migrating vSAN vmkernel ports to a new subnet" href=https://blah.cloud/infrastructure/migrating-vsan-vmkernel-ports-new-subnet/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>Configuring Auto Deploy Stateless Caching in vSphere 6.0
</h2></header><section class=entry-content>
<p>Following on from my previous post on configuring custom ESXi images for PXE deployment, it piqued my interest again in Auto Deploy, now that I have a lab large enough (enough physical failure domains) to justify auto-deploy I figured i’d give it another go. I have chosen to implement stateless caching as it will allow the hosts to boot from the last used ESXi image they had if the PxE/AutoDeploy server goes down - then when it comes back up will pull the new version, this accounts for a total infrastructure outage and still allows the hosts to be bootable....</p></section><footer class=entry-footer><span title="2016-08-19 21:53:33 +0000 UTC">August 19, 2016</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to Configuring Auto Deploy Stateless Caching in vSphere 6.0" href=https://blah.cloud/automation/configuring-auto-deploy-stateless-caching-vsphere-6-0/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>Building a customised ESXi image for PXE installation
</h2></header><section class=entry-content>
<p>Introduction I have recently been working on a larger scale platform for my employer, it requires quick deployments of environments on VSAN with some standardised VIBs added in, initially we were doing this with a standard ESXi ISO install through iDRAC and then installing vCenter, vSphere Update Manager and pushing the VIBs to the hosts via that.
This is clearly a sub-optimal process and given our dedicated lab environment, we wanted to be able to spin up/down environments a bit more quickly - so we looked to optimising the install process and making production ready as the first step (as most people know, VSAN has some stringent HCL requirements when it comes to drivers and firmware)....</p></section><footer class=entry-footer><span title="2016-08-09 12:40:27 +0000 UTC">August 9, 2016</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to Building a customised ESXi image for PXE installation" href=https://blah.cloud/infrastructure/building-customised-esxi-image-pxe-installation/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>vSphere Update Manager – Cannot Scan Host
</h2></header><section class=entry-content>
<p>I have been testing out Runecast Analyzer ↗ in my lab recently - it’s pretty badass, you can set it up to scan your virtual infrastructure at a vCenter level and will scan your vC, VMs and hosts looking for KBs that may apply, security compliance and best practises.
As you can see my lab isn’t exactly a model config when it comes to any of these things:...</p></section><footer class=entry-footer><span title="2016-05-15 14:29:38 +0000 UTC">May 15, 2016</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to vSphere Update Manager – Cannot Scan Host" href=https://blah.cloud/virtualisation/vsphere-update-manager-cannot-scan-host/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>In need of a multi-OS, bootable USB? Use an Android phone.
</h2></header><section class=entry-content>
<p>I found myself in the position recently whereby I had two hosts I bought off eBay (as one does for labs), they arrived, I had great plans… But no iDRAC Enterprise :(
While the iDRAC Ent cards were on their way to me I couldn’t help but want to install ESXi on these things so they were ready to go (old Dell R610s are seriously good value now). One slight problem....</p></section><footer class=entry-footer><span title="2016-04-07 17:09:06 +0000 UTC">April 7, 2016</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to In need of a multi-OS, bootable USB? Use an Android phone." href=https://blah.cloud/hardware/need-multi-os-bootable-usb-use-android-phone/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>VSAN Observer RVC in vCenter Appliance 6.0 U1
</h2></header><section class=entry-content>
<p>I have been working with VSAN in the lab recently and had the need to get some deeper stats on the inner operations.
I had upgraded the lab to ESXi 6.0 U1 and vCenter 6.0 U1 and for the life of me couldn’t get the RVC console in the VCSA to work per the VMware KB ↗.
In particular it just wouldn’t log in with this line, even with the correct password:...</p></section><footer class=entry-footer><span title="2015-10-06 09:18:45 +0000 UTC">October 6, 2015</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to VSAN Observer RVC in vCenter Appliance 6.0 U1" href=https://blah.cloud/virtualisation/vsan-observer-rvc-in-vcenter-appliance-6-0-u1/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>Deploying Dell OpenManage on ESXi and vCenter 6
</h2></header><section class=entry-content>
<p>If you’ve been reading my other posts of late, you will have gathered I’ve been building a new lab. I say “new”, the last one was a single R710 with a ReadyNas Ultra 6 attached. So essentially, this is my first REAL lab.
It’s mostly based on Dell hardware; it’s cheap on eBay, I like their management tools and in the past i’ve only really had good experiences with them, granted it’s no Cisco UCS, HP Bladesystem or Dell M1000e - I think with the addition of OpenManage, and in particular OMIVV it makes it almost as manageable as those environments when you get the foundations laid down nice and solid....</p></section><footer class=entry-footer><span title="2015-07-26 02:53:44 +0000 UTC">July 26, 2015</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to Deploying Dell OpenManage on ESXi and vCenter 6" href=https://blah.cloud/hardware/deploying-dell-openmanage-on-esxi-and-vcenter-6/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>vSphere HA Configuration fails: Operation Timed Out
</h2></header><section class=entry-content>
<p>I recently rebuilt my lab and added 2x new ESXi hosts, I re-used my old single host in the process which I upgraded from ESXi 5.5 to 6.0 and patched to the same level as the new hosts.
Everything was working as expected until it came for the time to enable HA.
My old host claimed the master roll and thus the other boxes had to connect to it as slaves, however, these failed with “HA Agent Unreachable” and “Operation Timed Out” errors....</p></section><footer class=entry-footer><span title="2015-07-22 12:17:47 +0000 UTC">July 22, 2015</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to vSphere HA Configuration fails: Operation Timed Out" href=https://blah.cloud/infrastructure/vsphere-ha-configuration-fails-operation-timed-out/></a>
</article><article class="post-entry tag-entry">
<header class=entry-header>
<h2>Safely check/remove orphaned VMDK files from ESXi
</h2></header><section class=entry-content>
<p>I have come across a number of environments where mystery “snapshot” files exist - they are not seen in snapshot manager, running a consolidation them doesn’t help, creating a snapshot (with memory, or guest OS quiescing) then running “Delete All” doesn’t resolve it, but some applications still think a snapshot is there.
To take care of these is quite a manual process after you have followed all the VMware KB advice:...</p></section><footer class=entry-footer><span title="2015-02-21 13:53:57 +0000 UTC">February 21, 2015</span>&nbsp;·&nbsp;Myles Gray</footer><a class=entry-link aria-label="post link to Safely check/remove orphaned VMDK files from ESXi" href=https://blah.cloud/infrastructure/safely-checkremove-orphaned-vmdk-files-from-esxi/></a>
</article><footer class=page-footer>
<nav class=pagination>
<a class=next href=https://blah.cloud/tags/esxi/page/2/>Next Page »</a>
</nav></footer></main></div><footer class=footer>
<span>&copy; 2022 <a href=https://blah.cloud/>Blah, Cloud</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/JPbaU rel=noopener target=_blank>BurgerMod</a>
</span>
</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
</body></html>