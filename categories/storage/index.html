<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Storage | Blah, Cloud</title>
<meta name=keywords content>
<meta name=description content="Adventures in architectures">
<meta name=author content="Myles Gray">
<link rel=canonical href=https://blah.cloud/categories/storage/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.b1da2895238dfeedf27f032004268905e3f3ba403dec0ceb07be46cce8ac5b96.css integrity="sha256-sdoolSON/u3yfwMgBCaJBePzukA97AzrB75GzOisW5Y=" rel="preload stylesheet" as=style>
<link rel=icon href=https://blah.cloud/images/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://blah.cloud/images/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://blah.cloud/images/favicon-32x32.png>
<link rel=apple-touch-icon href=https://blah.cloud/images/apple-touch-icon.png>
<link rel=mask-icon href=https://blah.cloud/images/logo.png>
<meta name=theme-color media="(prefers-color-scheme: dark)" content="rgba(88, 89, 91, 1)">
<meta name=theme-color content="rgba(240, 202, 102, 1)">
<meta name=msapplication-TileColor content="rgba(240, 202, 102, 1)">
<meta name=generator content="Hugo 0.92.2">
<link rel=alternate type=application/rss+xml href=https://blah.cloud/categories/storage/index.xml>
<meta property="og:title" content="Storage">
<meta property="og:description" content="Adventures in architectures">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blah.cloud/categories/storage/"><meta property="og:image" content="https://blah.cloud/images/og-card.jpg"><meta property="og:site_name" content="Blah, Cloud">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blah.cloud/images/og-card.jpg">
<meta name=twitter:title content="Storage">
<meta name=twitter:description content="Adventures in architectures">
<meta name=twitter:site content="@mylesagray">
<meta name=twitter:creator content="@mylesagray">
<script defer data-domain=blah.cloud data-api=/backend/api/event src=/backend/js/script.outbound-links.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script>
</head>
<body class=list id=top>
<script>window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?(document.body.classList.add('dark'),document.body.classList.remove('light')):(document.body.classList.remove('dark'),document.body.classList.add('light'));const darkModeMediaQuery=window.matchMedia('(prefers-color-scheme: dark)');darkModeMediaQuery.addListener(a=>{const b=a.matches;b?(document.body.classList.add('dark'),document.body.classList.remove('light')):(document.body.classList.remove('dark'),document.body.classList.add('light'))})</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(240, 202, 102, 1);--secondary:rgba(216, 214, 197, 1);--tertiary:rgb(75, 75, 75);--content:rgba(206, 205, 188, 1);--hljs-bg:#282a36;--code-bg:#282a36;--border:rgba(240, 202, 102, 1);--highlight:rgba(88, 89, 91, 1)}.list{background:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://blah.cloud/ accesskey=h title="Blah, Cloud. (Alt + H)">
<picture>
<source media="(min-width: 768px)" srcset=/images/logo-title.avif type=image/avif alt=logo width=245 height=34>
<source media="(min-width: 768px)" srcset=/images/logo-title.webp type=image/webp alt=logo width=245 height=34>
<source media="(min-width: 768px)" srcset=/images/logo-title.png type=image/png alt=logo width=245 height=34>
<source srcset=/images/logo.avif type=image/avif alt=logo width=65 height=65>
<source srcset=/images/logo.webp type=image/webp alt=logo width=65 height=65>
<img class=logo src=/images/logo-title.png alt=logo aria-label=logo width=245 height=34>
</picture></a>
</div>
<span class=logo-switches>
</span>
<span class=hamburger>
<button id=hamburger-toggle accesskey=m title="(Alt + M)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28"><path d="M24 21v2c0 .547-.453 1-1 1H1c-.547.0-1-.453-1-1v-2c0-.547.453-1 1-1h22c.547.0 1 .453 1 1zm0-8v2c0 .547-.453 1-1 1H1c-.547.0-1-.453-1-1v-2c0-.547.453-1 1-1h22c.547.0 1 .453 1 1zm0-8v2c0 .547-.453 1-1 1H1c-.547.0-1-.453-1-1V5c0-.547.453-1 1-1h22c.547.0 1 .453 1 1z"/></svg>
</button>
</span>
<ul id=menu>
<li>
<a href=https://blah.cloud/about/ title=about>
<span>about</span>
</a>
</li>
<li>
<a href=https://blah.cloud/blog/ title=blog>
<span>blog</span>
</a>
</li>
<li>
<a href=https://blah.cloud/now/ title=now>
<span>now</span>
</a>
</li>
<li>
<a href=https://blah.cloud/works/ title=works>
<span>works</span>
</a>
</li>
<li>
<a href=https://blah.cloud/search/ title=" (Alt + /)" accesskey=/>
<span><svg style="height:1em" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="fill-current w-5" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span>
</a>
</li>
</ul>
</nav>
</header>
<div class=container>
<main class=main>
<header class=page-header>
<h1>Storage</h1>
</header>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>ClusterAPI for vSphere, now with CNS support
</h2>
</header>
<section class=entry-content>
<p>Introduction If you want to learn about the basics and key concepts of ClusterAPI, then check out my post on the Alpha back in June here - it covers the high level concepts and troubleshooting of ClusterAPI, as well as what it offers to you as a user who wants to set up Kubernetes.
This blog is a look at what has changed and how you can use ClusterAPI to deploy K8s clusters on vSphere that use CNS and the CSI plugin for storage, that was introduced as part of vSphere 6....</p>
</section>
<footer class=entry-footer><span title="2019-10-10 12:21:35 +0000 UTC">October 10, 2019</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to ClusterAPI for vSphere, now with CNS support" href=https://blah.cloud/kubernetes/clusterapi-for-vsphere-now-with-cns-support/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Using Velero for K8s Backup and Restore of CSI Volumes
</h2>
</header>
<section class=entry-content>
<p>Introduction We’ve covered off prepping and installing K8s on this blog a few different ways; with VM templates built manually, with cloud-init, and with ClusterAPI vSphere. Let’s say you’ve grown attached to some of the workloads you’re running on one of your clusters, naturally. It would be nice to backup and restore those should something go wrong - or even, as was my case, I deployed a distro of K8s on my Raspberry Pi cluster that I wasn’t wild about and wanted to move to another - how do you migrate those workloads?...</p>
</section>
<footer class=entry-footer><span title="2019-10-04 12:18:17 +0000 UTC">October 4, 2019</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to Using Velero for K8s Backup and Restore of CSI Volumes" href=https://blah.cloud/automation/using-velero-for-k8s-backup-and-restore-of-csi-volumes/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Using the vSphere Cloud Provider for K8s to dynamically deploy volumes
</h2>
</header>
<section class=entry-content>
<p>Using the VCP As of the last part in the series we have a fully up and running k8s cluster with the vSphere Cloud Provider installed! Let’s make sure it works and is provisioning storage for us by deploying a StorageClass and a test app.
Prerequisites Tools I am using macOS, so will be using the brew package manager to install and manage my tools, if you are using Linux or Windows, use the appropriate install guide for each tool, according to your OS....</p>
</section>
<footer class=entry-footer><span title="2019-02-08 22:38:35 +0000 UTC">February 8, 2019</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to Using the vSphere Cloud Provider for K8s to dynamically deploy volumes" href=https://blah.cloud/kubernetes/using-the-vsphere-cloud-provider-for-k8s-to-dynamically-deploy-volumes/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>vSAN SPBM and vCloud Director
</h2>
</header>
<section class=entry-content>
<p>I had a question last week from Bozo Popovic ↗ during our EMEA field SE training session on vSAN operations relating to SPBM support for service providers that use vCloud Director in their environments.
.twitter-tweet { font: 14px/1.45 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif; border-left: 4px solid #2b7bb9; padding-left: 1.5em; color: #555; } .twitter-tweet a { color: #2b7bb9; text-decoration: none; } blockquote.twitter-tweet a:hover, blockquote.twitter-tweet a:focus { text-decoration: underline; } Next up Mr. @mylesagray giving a #vSAN operations overview to our EMEA field at the @vmwarevsan workshop this morning pic....</p>
</section>
<footer class=entry-footer><span title="2017-12-02 13:31:36 +0000 UTC">December 2, 2017</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to vSAN SPBM and vCloud Director" href=https://blah.cloud/cloud/vsan-spbm-vcloud-director/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Migrating vSAN vmkernel ports to a new subnet
</h2>
</header>
<section class=entry-content>
<p>After deploying a vSAN cluster, the need sometimes arises to make changes to its network configuration, such as migrating the vmkernel network of the cluster to a new subnet. This requirement may appear for example when changing the network in which the vSAN cluster is running, or even, in a more complex scenario such as when a standalone vSAN needs to be converted to a stretched cluster.
In these sorts of situations, complications may be encountered if the subnet in use for the vSAN vmkernel ports cannot be routed to the network as a whole, as it is in use elsewhere in the organization, and is currently isolated in an L2 segment....</p>
</section>
<footer class=entry-footer><span title="2017-11-03 14:01:47 +0000 UTC">November 3, 2017</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to Migrating vSAN vmkernel ports to a new subnet" href=https://blah.cloud/infrastructure/migrating-vsan-vmkernel-ports-new-subnet/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Customer, Partner, Vendor.
</h2>
</header>
<section class=entry-content>
<p>Over the last 9 months, a lot has happened in my life; I have a nice titanium plate in my shoulder now courtesy of a major car accident. I changed roles at Novosco ↗ from Infrastructure Engineer to Cloud Technologist - focusing more on R&D and emerging platforms, and I helped out Frank Denneman ↗ and Niels Hagoort ↗ in editing their best-selling vSphere 6.5 Host Deep Dive book ↗....</p>
</section>
<footer class=entry-footer><span title="2017-07-18 11:17:15 +0000 UTC">July 18, 2017</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to Customer, Partner, Vendor." href=https://blah.cloud/infrastructure/customer-partner-vendor/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>vSphere 6.5 Host Resources Deep Dive
</h2>
</header>
<section class=entry-content>
<p>Over the last 6-9 months, I have been reviewing the vast majority of a new book just released to print by Frank Denneman ↗ and Niels Hagoort ↗ - The vSphere 6.5 Host Resources Deep Dive ↗.
This book is, without a doubt, the most in-depth look at host design I have ever read, we are not talking about standard best practices here, though those are in there too....</p>
</section>
<footer class=entry-footer><span title="2017-06-21 12:21:56 +0000 UTC">June 21, 2017</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to vSphere 6.5 Host Resources Deep Dive" href=https://blah.cloud/hardware/vsphere-6-5-host-resources-deep-dive/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Replicating SAN on openSUSE with VAAI
</h2>
</header>
<section class=entry-content>
<p>Preamble This article was written a few years back, but never published - it was some work I was doing in my lab to try and get to grips around the work involved in creating a SAN with synchronous replication built in from scratch.
It in no way should be used for production, but rather as a learning exercise - as previously stated the instructions are a few years old and version specific, so openSUSE may well now support some of the modules I had to compile and create repos for manually, also DRBD9 has been released and should obviously be used in place of DRBD8 as I have below....</p>
</section>
<footer class=entry-footer><span title="2016-08-27 12:59:18 +0000 UTC">August 27, 2016</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to Replicating SAN on openSUSE with VAAI" href=https://blah.cloud/hardware/replicating-san-opensuse-vaai/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>LSI3108 based controllers now VSAN 6.2 Certified
</h2>
</header>
<section class=entry-content>
<p>After a long an arduous certification and regression testing process following many problems with LSI 3108 based controllers that I have been using for VSAN they are finally VSAN 6.2 certified.
Having seen and opened multiple tickets about strange controller behaviors (hot add controller do VMware have released a FW/HW and Software combo that, according to a highly regarded VMware internal storage resource:
Its certainly the most tested combination of a firmware/driver/controller ever at this point […] My understanding is the reason this took so long is they didn’t just fix the big issue, but also minor ones too, and any minor regressions...</p>
</section>
<footer class=entry-footer><span title="2016-04-29 09:22:23 +0000 UTC">April 29, 2016</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to LSI3108 based controllers now VSAN 6.2 Certified" href=https://blah.cloud/hardware/lsi3108-based-controllers-now-vsan-6-2-certified/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>VSAN Observer RVC in vCenter Appliance 6.0 U1
</h2>
</header>
<section class=entry-content>
<p>I have been working with VSAN in the lab recently and had the need to get some deeper stats on the inner operations.
I had upgraded the lab to ESXi 6.0 U1 and vCenter 6.0 U1 and for the life of me couldn’t get the RVC console in the VCSA to work per the VMware KB ↗.
In particular it just wouldn’t log in with this line, even with the correct password:...</p>
</section>
<footer class=entry-footer><span title="2015-10-06 09:18:45 +0000 UTC">October 6, 2015</span>&nbsp;·&nbsp;Myles Gray</footer>
<a class=entry-link aria-label="post link to VSAN Observer RVC in vCenter Appliance 6.0 U1" href=https://blah.cloud/virtualisation/vsan-observer-rvc-in-vcenter-appliance-6-0-u1/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=next href=https://blah.cloud/categories/storage/page/2/>Next Page »</a>
</nav>
</footer>
</main>
</div>
<footer class=footer>
<span>&copy; 2022 <a href=https://blah.cloud/>Blah, Cloud</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/JPbaU rel=noopener target=_blank>BurgerMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
</body>
</html>